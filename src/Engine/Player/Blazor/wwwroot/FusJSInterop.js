!function (t) { var e = {}; function i(n) { if (e[n]) return e[n].exports; var r = e[n] = { i: n, l: !1, exports: {} }; return t[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports } i.m = t, i.c = e, i.d = function (t, e, n) { i.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: n }) }, i.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, i.t = function (t, e) { if (1 & e && (t = i(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var n = Object.create(null); if (i.r(n), Object.defineProperty(n, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var r in t) i.d(n, r, function (e) { return t[e] }.bind(null, r)); return n }, i.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return i.d(e, "a", e), e }, i.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, i.p = "", i(i.s = 0) }([function (t, e, i) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); const n = i(1); var r; !function (t) { const e = "BlazorExtensions", i = { WebGL2: new n.ContextManager("webgl2") }; t.initialize = function () { "undefined" == typeof window || window[e] ? window[e] = { ...window[e], ...i } : window[e] = { ...i } } }(r || (r = {})), r.initialize() }, function (t, e, i) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); e.ContextManager = class { constructor(t) { this.webGLObject = new Array, this.webGLContext = !1, this.webGLTypes = [WebGLBuffer, WebGLShader, WebGLProgram, WebGLFramebuffer, WebGLRenderbuffer, WebGLTexture, WebGLUniformLocation], this.add = ((t, e) => { if (this.context = e ? t.getContext("webgl2", e) : t.getContext("webgl2"), !this.context) throw new Error("Invalid context.") }), this.remove = (t => { this.context = void 0 }), this.setProperty = ((t, e, i) => { this.setPropertyWithContext(this.context, e, i) }), this.getProperty = ((t, e) => { if (void 0 !== this.context) return this.serialize(this.context[e]) }), this.call = ((t, e, i) => this.callWithContext(this.context, e, i)), this.callBatch = ((t, e) => { const i = this.context; for (let t = 0; t < e.length; t++) { let n = e[t].slice(2); e[t][1] ? this.callWithContext(i, e[t][0], n) : this.setPropertyWithContext(i, e[t][0], Array.isArray(n) && n.length > 0 ? n[0] : null) } }), this.callWithContext = ((t, e, i) => this.serialize(this.prototypes[e].apply(this.context, void 0 != i ? i.map(t => this.deserialize(e, t)) : []))), this.setPropertyWithContext = ((t, e, i) => { void 0 !== this.context && (this.context[e] = this.deserialize(e, i)) }), this.getContext = (t => this.context), this.deserialize = ((t, e) => { if (!this.webGLContext || void 0 === e) return e; if (e.hasOwnProperty("webGLType") && e.hasOwnProperty("id")) return this.webGLObject[e.id]; if (Array.isArray(e) && !t.endsWith("v")) return Int8Array.of(...e); if ("string" != typeof e || "bufferData" !== t && "bufferSubData" !== t) return e; { let t = window.atob(e), i = t.length, n = new Uint8Array(i); for (let e = 0; e < i; e++)n[e] = t.charCodeAt(e); return n } }), this.serialize = (t => { if (t instanceof TextMetrics) return { width: t.width }; if (!this.webGLContext || void 0 === t) return t; const e = this.webGLTypes.find(e => t instanceof e); if (void 0 !== e) { const i = this.webGLObject.length; return this.webGLObject.push(t), { webGLType: e.name, id: i } } return t instanceof WebGLActiveInfo ? (this.webGLObject.push(t), { name: t.name, size: t.size, type: t.type }) : t }), this.contextName = t, this.prototypes = WebGL2RenderingContext.prototype, this.webGLContext = !0 } } }]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0luaXRpYWxpemVDYW52YXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NhbnZhc0NvbnRleHRNYW5hZ2VyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ2FudmFzQ29udGV4dE1hbmFnZXJfMSIsIkNhbnZhcyIsImJsYXpvckV4dGVuc2lvbnMiLCJleHRlbnNpb25PYmplY3QiLCJXZWJHTDIiLCJDb250ZXh0TWFuYWdlciIsImluaXRpYWxpemUiLCJ3aW5kb3ciLCJbb2JqZWN0IE9iamVjdF0iLCJjb250ZXh0TmFtZSIsInRoaXMiLCJ3ZWJHTE9iamVjdCIsIkFycmF5Iiwid2ViR0xDb250ZXh0Iiwid2ViR0xUeXBlcyIsIldlYkdMQnVmZmVyIiwiV2ViR0xTaGFkZXIiLCJXZWJHTFByb2dyYW0iLCJXZWJHTEZyYW1lYnVmZmVyIiwiV2ViR0xSZW5kZXJidWZmZXIiLCJXZWJHTFRleHR1cmUiLCJXZWJHTFVuaWZvcm1Mb2NhdGlvbiIsImFkZCIsImNhbnZhcyIsInBhcmFtZXRlcnMiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsIkVycm9yIiwicmVtb3ZlIiwidW5kZWZpbmVkIiwic2V0UHJvcGVydHkiLCJzZXRQcm9wZXJ0eVdpdGhDb250ZXh0IiwiZ2V0UHJvcGVydHkiLCJzZXJpYWxpemUiLCJtZXRob2QiLCJhcmdzIiwiY2FsbFdpdGhDb250ZXh0IiwiY2FsbEJhdGNoIiwiYmF0Y2hlZENhbGxzIiwibGVuZ3RoIiwicGFyYW1zIiwic2xpY2UiLCJpc0FycmF5IiwiY29udGV4dF8iLCJwcm90b3R5cGVzIiwiYXBwbHkiLCJtYXAiLCJkZXNlcmlhbGl6ZSIsImVuZHNXaXRoIiwiSW50OEFycmF5Iiwib2YiLCJiaW5TdHIiLCJhdG9iIiwiYnl0ZXMiLCJVaW50OEFycmF5IiwiY2hhckNvZGVBdCIsIlRleHRNZXRyaWNzIiwid2lkdGgiLCJ0eXBlIiwiZmluZCIsImlkIiwicHVzaCIsIndlYkdMVHlwZSIsIldlYkdMQWN0aXZlSW5mbyIsInNpemUiLCJXZWJHTDJSZW5kZXJpbmdDb250ZXh0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FE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RixHQUFJQSxHQUVELE9BQUlsRSxhQUFrQnFFLGlCQUMzQnJELEtBQUtDLFlBQVlrRCxLQUFLbkUsSUFFcEJuQixLQUFNbUIsRUFBT25CLEtBQ2J5RixLQUFNdEUsRUFBT3NFLEtBQ2JOLEtBQU1oRSxFQUFPZ0UsT0FHUmhFLElBeEdQZ0IsS0FBS0QsWUFBY0EsRUFDbkJDLEtBQUtrQyxXQUFhcUIsdUJBQXVCckUsVUFDekNjLEtBQUtHLGNBQWUiLCJmaWxlIjoiYmxhem9yLmV4dGVuc2lvbnMuY2FudmFzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgQ29udGV4dE1hbmFnZXIgfSBmcm9tICcuL0NhbnZhc0NvbnRleHRNYW5hZ2VyJztcclxuXHJcbm5hbWVzcGFjZSBDYW52YXMge1xyXG4gIGNvbnN0IGJsYXpvckV4dGVuc2lvbnM6IHN0cmluZyA9ICdCbGF6b3JFeHRlbnNpb25zJztcclxuICAvLyBkZWZpbmUgd2hhdCB0aGlzIGV4dGVuc2lvbiBhZGRzIHRvIHRoZSB3aW5kb3cgb2JqZWN0IGluc2lkZSBCbGF6b3JFeHRlbnNpb25zXHJcbiAgY29uc3QgZXh0ZW5zaW9uT2JqZWN0ID0geyAgICBcclxuICAgIFdlYkdMMjogbmV3IENvbnRleHRNYW5hZ2VyKFwid2ViZ2wyXCIpXHJcbiAgfTtcclxuXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpbmRvd1tibGF6b3JFeHRlbnNpb25zXSkge1xyXG4gICAgICAvLyB3aGVuIHRoZSBsaWJyYXJ5IGlzIGxvYWRlZCBpbiBhIGJyb3dzZXIgdmlhIGEgPHNjcmlwdD4gZWxlbWVudCwgbWFrZSB0aGVcclxuICAgICAgLy8gZm9sbG93aW5nIEFQSXMgYXZhaWxhYmxlIGluIGdsb2JhbCBzY29wZSBmb3IgaW52b2NhdGlvbiBmcm9tIEpTXHJcbiAgICAgIHdpbmRvd1tibGF6b3JFeHRlbnNpb25zXSA9IHtcclxuICAgICAgICAuLi5leHRlbnNpb25PYmplY3RcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdpbmRvd1tibGF6b3JFeHRlbnNpb25zXSA9IHtcclxuICAgICAgICAuLi53aW5kb3dbYmxhem9yRXh0ZW5zaW9uc10sXHJcbiAgICAgICAgLi4uZXh0ZW5zaW9uT2JqZWN0XHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5DYW52YXMuaW5pdGlhbGl6ZSgpO1xyXG4iLCJleHBvcnQgY2xhc3MgQ29udGV4dE1hbmFnZXIge1xyXG4gIHByaXZhdGUgY29udGV4dDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCB8IHVuZGVmaW5lZDtcclxuICBwcml2YXRlIHJlYWRvbmx5IHdlYkdMT2JqZWN0ID0gbmV3IEFycmF5PGFueT4oKTtcclxuICBwcml2YXRlIHJlYWRvbmx5IGNvbnRleHROYW1lOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSB3ZWJHTENvbnRleHQgPSBmYWxzZTtcclxuICBwcml2YXRlIHJlYWRvbmx5IHByb3RvdHlwZXM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgcHJpdmF0ZSByZWFkb25seSB3ZWJHTFR5cGVzID0gW1xyXG4gICAgV2ViR0xCdWZmZXIsIFdlYkdMU2hhZGVyLCBXZWJHTFByb2dyYW0sIFdlYkdMRnJhbWVidWZmZXIsIFdlYkdMUmVuZGVyYnVmZmVyLCBXZWJHTFRleHR1cmUsIFdlYkdMVW5pZm9ybUxvY2F0aW9uXHJcbiAgXTtcclxuXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKGNvbnRleHROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5jb250ZXh0TmFtZSA9IGNvbnRleHROYW1lOyAgIFxyXG4gICAgICB0aGlzLnByb3RvdHlwZXMgPSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LnByb3RvdHlwZTtcclxuICAgICAgdGhpcy53ZWJHTENvbnRleHQgPSB0cnVlOyAgICAgIFxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZCA9IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBwYXJhbWV0ZXJzOiBhbnkpID0+IHtcclxuIFxyXG4gICAgaWYgKHBhcmFtZXRlcnMpXHJcbiAgICAgIHRoaXMuY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbDInLCBwYXJhbWV0ZXJzKSBhcyBXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xyXG4gICAgZWxzZVxyXG4gICAgICB0aGlzLmNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wyJykgYXMgV2ViR0wyUmVuZGVyaW5nQ29udGV4dDtcclxuXHJcbiAgICBpZiAoIXRoaXMuY29udGV4dCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvbnRleHQuJyk7XHJcblxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlbW92ZSA9IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSA9PiB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0UHJvcGVydHkgPSAoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4geyAgICBcclxuICAgIHRoaXMuc2V0UHJvcGVydHlXaXRoQ29udGV4dCh0aGlzLmNvbnRleHQsIHByb3BlcnR5LCB2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0UHJvcGVydHkgPSAoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgcHJvcGVydHk6IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKHRoaXMuY29udGV4dCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICByZXR1cm4gdGhpcy5zZXJpYWxpemUodGhpcy5jb250ZXh0W3Byb3BlcnR5XSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2FsbCA9IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBtZXRob2Q6IHN0cmluZywgYXJnczogYW55KSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5jYWxsV2l0aENvbnRleHQodGhpcy5jb250ZXh0LCBtZXRob2QsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNhbGxCYXRjaCA9IChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBiYXRjaGVkQ2FsbHM6IGFueVtdW10pID0+IHtcclxuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhdGNoZWRDYWxscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBsZXQgcGFyYW1zID0gYmF0Y2hlZENhbGxzW2ldLnNsaWNlKDIpO1xyXG4gICAgICBpZiAoYmF0Y2hlZENhbGxzW2ldWzFdKSB7XHJcbiAgICAgICAgdGhpcy5jYWxsV2l0aENvbnRleHQoY29udGV4dCwgYmF0Y2hlZENhbGxzW2ldWzBdLCBwYXJhbXMpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2V0UHJvcGVydHlXaXRoQ29udGV4dChcclxuICAgICAgICAgIGNvbnRleHQsXHJcbiAgICAgICAgICBiYXRjaGVkQ2FsbHNbaV1bMF0sXHJcbiAgICAgICAgICBBcnJheS5pc0FycmF5KHBhcmFtcykgJiYgcGFyYW1zLmxlbmd0aCA+IDAgPyBwYXJhbXNbMF0gOiBudWxsKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjYWxsV2l0aENvbnRleHQgPSAoY29udGV4dF86IGFueSwgbWV0aG9kOiBzdHJpbmcsIGFyZ3M6IGFueSkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VyaWFsaXplKHRoaXMucHJvdG90eXBlc1ttZXRob2RdLmFwcGx5KHRoaXMuY29udGV4dCwgYXJncyAhPSB1bmRlZmluZWQgPyBhcmdzLm1hcCgodmFsdWUpID0+IHRoaXMuZGVzZXJpYWxpemUobWV0aG9kLCB2YWx1ZSkpIDogW10pKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0UHJvcGVydHlXaXRoQ29udGV4dCA9IChjb250ZXh0XzogYW55LCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB7XHJcbiAgICBpZiAodGhpcy5jb250ZXh0ID09PSB1bmRlZmluZWQpIHJldHVybjtcclxuICAgIHRoaXMuY29udGV4dFtwcm9wZXJ0eV0gPSB0aGlzLmRlc2VyaWFsaXplKHByb3BlcnR5LCB2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldENvbnRleHQgPSAoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuY29udGV4dDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZGVzZXJpYWxpemUgPSAobWV0aG9kOiBzdHJpbmcsIG9iamVjdDogYW55KSA9PiB7XHJcbiAgICBpZiAoIXRoaXMud2ViR0xDb250ZXh0IHx8IG9iamVjdCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gb2JqZWN0OyAvL2Rlc2VyaWFsaXphdGlvbiBvbmx5IG5lZWRzIHRvIGhhcHBlbiBmb3Igd2ViR0xcclxuXHJcbiAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KFwid2ViR0xUeXBlXCIpICYmIG9iamVjdC5oYXNPd25Qcm9wZXJ0eShcImlkXCIpKSB7XHJcbiAgICAgIHJldHVybiAodGhpcy53ZWJHTE9iamVjdFtvYmplY3RbXCJpZFwiXV0pO1xyXG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkgJiYgIW1ldGhvZC5lbmRzV2l0aChcInZcIikpIHtcclxuICAgICAgcmV0dXJuIEludDhBcnJheS5vZiguLi4ob2JqZWN0IGFzIG51bWJlcltdKSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiAob2JqZWN0KSA9PT0gXCJzdHJpbmdcIiAmJiAobWV0aG9kID09PSBcImJ1ZmZlckRhdGFcIiB8fCBtZXRob2QgPT09IFwiYnVmZmVyU3ViRGF0YVwiKSkge1xyXG4gICAgICBsZXQgYmluU3RyID0gd2luZG93LmF0b2Iob2JqZWN0KTtcclxuICAgICAgbGV0IGxlbmd0aCA9IGJpblN0ci5sZW5ndGg7XHJcbiAgICAgIGxldCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBieXRlc1tpXSA9IGJpblN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBieXRlcztcclxuICAgIH0gZWxzZVxyXG4gICAgICByZXR1cm4gb2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXJpYWxpemUgPSAob2JqZWN0OiBhbnkpID0+IHtcclxuICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBUZXh0TWV0cmljcykge1xyXG4gICAgICByZXR1cm4geyB3aWR0aDogb2JqZWN0LndpZHRoIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLndlYkdMQ29udGV4dCB8fCBvYmplY3QgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG9iamVjdDsgLy9zZXJpYWxpemF0aW9uIG9ubHkgbmVlZHMgdG8gaGFwcGVuIGZvciB3ZWJHTFxyXG5cclxuICAgIGNvbnN0IHR5cGUgPSB0aGlzLndlYkdMVHlwZXMuZmluZCgodHlwZSkgPT4gb2JqZWN0IGluc3RhbmNlb2YgdHlwZSk7XHJcbiAgICBpZiAodHlwZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnN0IGlkID0gdGhpcy53ZWJHTE9iamVjdC5sZW5ndGg7XHJcbiAgICAgIHRoaXMud2ViR0xPYmplY3QucHVzaChvYmplY3QpO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB3ZWJHTFR5cGU6IHR5cGUubmFtZSxcclxuICAgICAgICBpZDogaWRcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgV2ViR0xBY3RpdmVJbmZvKSB7XHJcbiAgICAgIHRoaXMud2ViR0xPYmplY3QucHVzaChvYmplY3QpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbmFtZTogb2JqZWN0Lm5hbWUsXHJcbiAgICAgICAgc2l6ZTogb2JqZWN0LnNpemUsXHJcbiAgICAgICAgdHlwZTogb2JqZWN0LnR5cGVcclxuICAgICAgfTtcclxuICAgIH0gZWxzZVxyXG4gICAgICByZXR1cm4gb2JqZWN0O1xyXG4gIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9